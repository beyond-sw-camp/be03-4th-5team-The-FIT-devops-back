# :runner: The FIT

## :muscle: 프로젝트 소개
>  :sparkles: Stay CONNECTED! Stay FIT!

<details>
<summary>
<b>개요</b>
</summary>
The FIT은 트레이너와 트레이니(회원)가 상호작용하는 플랫폼을 제공하여, 
<br>트레이너가 트레이니를 운동 및 식단 관리 측면에서 밀착 관리를 할 수 있도록 돕는 웹 애플리케이션입니다. 
</details>
<details>
<summary>
<b>제공 서비스</b>
</summary>

### :calendar: **_캘린더 (habit tracker)_**

:bow:트레이니는 각자 본인만의 캘린더를 통해서 본인의 운동 기록과 식단 기록을 확인할 수 있습니다.
<br>운동을 수행한 날과 식단을 등록한 날에는 각각 다른 색으로 표기가 됩니다.

:raising_hand:트레이너는 본인이 담당하고 있는 트레이니의 캘린더를 확인함으로써 기록을 트래킹할 수 있습니다. 

### :boxing_glove: **_운동 기록_**
:raising_hand:트레이너는 본인이 담당하고 있는 트레이니에게 운동을 할당할 수 있습니다. 
<br>후, 이에 관한 피드백을 등록할 수 있습니다.

:bow:트레이니는 트레이너가 할당한 운동을 수행함으로써 무게, 세트, 횟수 등 세세한 정보를 포함하여 운동을 기록할 수 있습니다. 
<br>후, 트레이너가 남긴 피드백을 확인할 수 있습니다.

### :green_salad: **_식단 기록_**
:bow:트레이니는 매일 식단을 사진과 상세 설명을 포함하여 등록할 수 있습니다. 

:raising_hand:트레이너는 본인이 담당하고 있는 트레이니의 식단 기록을 확인하고 
<br>후, 피드백을 남길 수 있습니다.

</details>

<details>
<summary>
<b>기술 스택</b>
</summary>
<h3>DB<h3>

<img src="https://img.shields.io/badge/mariaDB-003545?style=for-the-badge&logo=mariaDB&logoColor=white">
<img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=Redis&logoColor=white"> 

<h3>FRONTEND<h3>

<img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white">
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white">
<img src="https://img.shields.io/badge/vue.js-4FC08D?style=for-the-badge&logo=vue.js&logoColor=white">
<img src="https://img.shields.io/badge/tailwindcss-skyblue?style=for-the-badge&logo=tailwindcss&logoColor=white">

<h3>BACKEND<h3>

<img src="https://img.shields.io/badge/spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white">
<img src="https://img.shields.io/badge/gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white">
<img src="https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white">

<h3>AWS<h3>

<img src="https://img.shields.io/badge/amazonecr-navy?style=for-the-badge&logo=amazonaws&logoColor=white">
<img src="https://img.shields.io/badge/amazonec2-skyblue?style=for-the-badge&logo=amazonec2&logoColor=white">
<img src="https://img.shields.io/badge/amazonrds-02303A?style=for-the-badge&logo=amazonrds&logoColor=white">
<img src="https://img.shields.io/badge/amazons3-orange?style=for-the-badge&logo=amazons3&logoColor=white">
<img src="https://img.shields.io/badge/amazoneks-green?style=for-the-badge&logo=amazonaws&logoColor=white">
<img src="https://img.shields.io/badge/amazonelastickcahe-pink?style=for-the-badge&logo=amazonaws&logoColor=white">

<h3>TOOLS</h3>

<img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
<img src="https://img.shields.io/badge/gitaction-181760?style=for-the-badge&logo=github&logoColor=white">
<img src="https://img.shields.io/badge/slack-purple?style=for-the-badge&logo=slack&logoColor=white">
<img src="https://img.shields.io/badge/jenkins-orange?style=for-the-badge&logo=jenkins&logoColor=white">
</details>
<br>
  
## :muscle: 요구사항명세서
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/8d085b767bab87ec7eb6362d8df4276b832f8b7a/The%20FIT%20%EC%82%AC%EC%A7%84%20%EC%9E%90%EB%A3%8C/The%20FIT%20%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD%20%EB%AA%85%EC%84%B8%EC%84%9C.png">

## :muscle: ERD

<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/8d085b767bab87ec7eb6362d8df4276b832f8b7a/The%20FIT%20%EC%82%AC%EC%A7%84%20%EC%9E%90%EB%A3%8C/The%20FIT%20%EB%85%BC%EB%A6%AC%EC%A0%81%20ERD.png">


## :muscle: API설계
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/8d085b767bab87ec7eb6362d8df4276b832f8b7a/The%20FIT%20%EC%82%AC%EC%A7%84%20%EC%9E%90%EB%A3%8C/The%20FIT%20API%EC%84%A4%EA%B3%84.png">

## :muscle: 초기 배포 아키텍처

<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/8d085b767bab87ec7eb6362d8df4276b832f8b7a/The%20FIT%20%EC%82%AC%EC%A7%84%20%EC%9E%90%EB%A3%8C/The%20FIT%20DB%20%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90.png">

## :muscle: 최종 배포 아키텍쳐

<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/fd0c864e2ebcdd75e33210d25e93e52a2a2c63de/The%20FIT%20%EC%82%AC%EC%A7%84%20%EC%9E%90%EB%A3%8C/The%20FIT%20%EC%B5%9C%EC%A2%85%20%EB%B0%B0%ED%8F%AC%20%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90.png">

## :muscle: Script 
<details>
<summary>
<b>git action script</b>
</summary>
```python
print('hello')
```
</details>

<details>
<summary>
<b>jenkins script</b>
</summary>
</details>

<details>
<summary>
<b>dokcer spcript</b>
</summary>
</details>




## :muscle: 중점 기술 명세
<details>
<summary>
<b>Refreh Token</b>
</summary>
  
  ## Refreh Token 구현 방법 2가지
1. JWT 형태의 Refresh Token
    1. 토큰 자체에 데이터를 담을 수 있습니다.
    2. 데이터베이스에 별도로 액세스하지 않아도 된다는 점이 있고 따라 서버의 부하가 상대적으로 적습니다.
    3. Refresh Token 을 서버에서 제어할 수 없다는 단점
    4. Refresh Token 을 탈취당한 상황에서 토큰을 별달리 무효화 시키는 방법이 없습니다
2. JWT 형태가 아닌 Refresh Token
    1. 그 토큰을 사용자와 매핑되도록 데이터베이스에 저장
    2. Refresh Token 사용시 데이터베이스에 액세스
    3. 강제로 로그아웃 시키거나, 차단할 수 있게되고 또한 Refresh Token이 탈취되었을 경우 그 즉시 무효화시킬 수 있습니다.
## 구현 방식
1. Access Token
    1. jwt 토큰 발급 : 페이 로더에 이메일과 유저의 role 담음
2. Refresh Token
    1. jwt 형태가 아닌 형태로 구현
    2. 유저에 관한 특정 정보를 페이로더에 담지 않음
    3. jwt로 형태로 구현하는 이유는 logged된 유저의 정보를 DB에 조회하지 않기 위함
    4. 한번 사용된 Refresh Token은 새로 발급 (RTR 방식)
    5. 발급된 RT와 AT를 모두 탈취 당했을 경우 서버에서 이를 알 수 있다.
3. Redis
    1. Key : R.T VS A.T
    2. A.T의 경우 (A.T : R.T)
    3. 그외 사용자의 정보(unique한)로 맵핑 할 경우 ( email : R.T)
</details>

<details>
<summary>
<b>OAuth</b>
</summary>
  
  ## 기본 개념
  - 권한 부여 승인을 위해 자체 생성한 Authorization Code를 전달하는 방식
  - 클라이언트가 사용자를 대신하여 특정 자원에 접근을 요청할 때 사용
  - Refresh Token의 사용이 가능한 방식
## 유저에서 권한 서버까지
1. 유저는 권한 부여 승인 요청
2. 이후 클라이언트는 권한 서버 (구글)에서 제공하는 로그인 페이지를 브라우저를 띄움
3. 이 페이지를 통해 사용자가 로그인을 하면 권한 서버는 권한 부여 승인 코드 요청 시 전달받은 redirect_url로 Authorization Code를 전달
4. Authorization Code 는 권한 서버에서 제공하는 API를 통해 Access Token 으로 교환
  
</details>
<details>
<summary>
<b>MapStruct </b>
</summary>
  
## MapStruct 사용 이유
> MapStruct는 Java bean 유형 간의 매핑 구현을 단순화하는 코드 생성기로, 다음과 같은 이점을 제공합니다:
1. 컴파일 시점에 코드를 생성하여 런타임에서 안정성을 보장합니다.
2. 다른 매핑 라이브러리보다 압도적으로 속도가 빠릅니다.
3. 반복되는 객체 매핑에서 발생할 수 있는 오류를 줄이며, 구현 코드를 자동으로 만들어주기 때문에 사용이 쉽습니다.

## 매핑 인터페이스 정의
> 엔티티와 DTO 간 매핑을 위한 인터페이스를 생성합니다. MapStruct는 이 인터페이스를 구현하는 클래스를 자동으로 생성합니다.
> 
## 서비스 또는 컨트롤러에서 매핑 사용
Service 또는 Controller에서 Mapper 인스턴스를 사용하여 DTO와 엔티티 간의 변환을 수행합니다. 필드가 다른 경우 매핑을 하기 위해선 다음과 같이 @Mapping을 사용해서 명시해줘야 합니다.
매핑하려는 모든 컬럼들이 같다면 별도의 어노테이션으로 표시할 필요가 없지만, 만약 지정해야 하는 경우가 있다면 예시처럼 @Mapping을 이용하여 source에는 매핑값을 가지고 올 대상, target에는 매핑할 대상을 각각 작성해줍니다.
ource="trainer.id"와 같이 점(.)을 사용하는 이유는, 복합 객체 내부의 특정 필드를 지정하기 위함입니다.
> 즉, trainer 객체의 id 필드를 대상 객체의 trainerId 필드와 매핑하겠다는 의미입니다.
>  이렇게 되면 구현체는 자동으로 생성됩니다.
</details>

<details>
<summary>
<b>SSE</b>
</summary>
</details>

<details>
<summary>
<b>Redis pub/subs</b>
</summary>
</details>


## :muscle: 데모 영상
<details>
<summary>
<b>구글 로그인</b>
</summary>
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/1ee82addc71d841b3b8a6d8db4a81058047bc403/%EB%8D%B0%EB%AA%A8%20%EC%98%81%EC%83%81/0.%20%EA%B5%AC%EA%B8%80%EB%A1%9C%EA%B7%B8%EC%9D%B8.gif">
</details>

<details>
<summary>
<b>트레이너로 회원가입</b>
</summary>
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/1ee82addc71d841b3b8a6d8db4a81058047bc403/%EB%8D%B0%EB%AA%A8%20%EC%98%81%EC%83%81/1.%20trainer%20%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85.gif">
</details>

<details>
<summary>
<b>트레이니로 회원가입</b>
</summary>
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/1ee82addc71d841b3b8a6d8db4a81058047bc403/%EB%8D%B0%EB%AA%A8%20%EC%98%81%EC%83%81/2.%20member%20%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85.gif">
</details>

<details>
<summary>
<b>관리자로 전체 회원 / 운동 목록 관리</b>
</summary>
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/1ee82addc71d841b3b8a6d8db4a81058047bc403/%EB%8D%B0%EB%AA%A8%20%EC%98%81%EC%83%81/3.%20admin%20%EC%A0%84%EC%B2%B4%ED%9A%8C%EC%9B%90%EA%B4%80%EB%A6%AC%2C%20%EC%9A%B4%EB%8F%99%EB%AA%A9%EB%A1%9D%EA%B4%80%EB%A6%AC.gif">
</details>

<details>
<summary>
<b>트레이너 로그인 / 마이페이지 / 로그아웃</b>
</summary>
<img src="[https://github.com/beyond-sw-camp-spring-project-The-fit/The-fit/blob/docs/%E1%84%83%E1%85%A6%E1%84%86%E1%85%A9%20%E1%84%8B%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A1%E1%86%BC/4.%20trainer%20%E1%84%85%E1%85%A9%E1%84%80%E1%85%B3%E1%84%8B%E1%85%B5%E1%86%AB,%20%E1%84%82%E1%85%A2%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9,%20%E1%84%85%E1%85%A9%E1%84%80%E1%85%B3%E1%84%8B%E1%85%A1%E1%84%8B%E1%85%AE%E1%86%BA.gif?raw=true](https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/1ee82addc71d841b3b8a6d8db4a81058047bc403/%EB%8D%B0%EB%AA%A8%20%EC%98%81%EC%83%81/4.%20trainer%20%EB%A1%9C%EA%B7%B8%EC%9D%B8%2C%20%EB%82%B4%EC%A0%95%EB%B3%B4%2C%20%EB%A1%9C%EA%B7%B8%EC%95%84%EC%9B%83.gif)">
</details>

<details>
<summary>
<b>트레이니 로그인 / 마이페이지 / 로그아웃</b>
</summary>
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/1ee82addc71d841b3b8a6d8db4a81058047bc403/%EB%8D%B0%EB%AA%A8%20%EC%98%81%EC%83%81/5.%20member%20%EB%A1%9C%EA%B7%B8%EC%9D%B8%2C%20%EB%82%B4%EC%A0%95%EB%B3%B4%2C%20%EB%A1%9C%EA%B7%B8%EC%95%84%EC%9B%83.gif">
</details>

<details>
<summary>
<b>트레이니의 내 담당 트레이너 보기 / 트레이너 변경</b>
</summary>
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/1ee82addc71d841b3b8a6d8db4a81058047bc403/%EB%8D%B0%EB%AA%A8%20%EC%98%81%EC%83%81/6.%20member%20%ED%8A%B8%EB%A0%88%EC%9D%B4%EB%84%88%EB%B3%B4%EA%B8%B0%20%EB%B0%8F%20%ED%8A%B8%EB%A0%88%EC%9D%B4%EB%84%88%20%EC%88%98%EC%A0%95.gif">
</details>

<details>
<summary>
<b>트레이너의 운동 할당</b>
</summary>
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/1ee82addc71d841b3b8a6d8db4a81058047bc403/%EB%8D%B0%EB%AA%A8%20%EC%98%81%EC%83%81/7.%20trainer%20%ED%8A%B8%EB%A0%88%EC%9D%B4%EB%8B%88%EC%97%90%EA%B2%8C%20%EC%9A%B4%EB%8F%99%ED%95%A0%EB%8B%B9.gif">
</details>

<details>
<summary>
<b>트레이니의 운동 기록 등록</b>
</summary>
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/1ee82addc71d841b3b8a6d8db4a81058047bc403/%EB%8D%B0%EB%AA%A8%20%EC%98%81%EC%83%81/8.%20member%20%EC%9A%B4%EB%8F%99%EB%93%B1%EB%A1%9D.gif">
</details>

<details>
<summary>
<b>트레이니의 식단 기록 등록</b>
</summary>
<img src="https://github.com/beyond-sw-camp/be03-4th-5team-The-FIT-devops-front/blob/1ee82addc71d841b3b8a6d8db4a81058047bc403/%EB%8D%B0%EB%AA%A8%20%EC%98%81%EC%83%81/9.%20member%20%EC%8B%9D%EB%8B%A8%20%EB%93%B1%EB%A1%9D.gif">
</details>
